{% extends 'base.html.twig' %}
{% block title %}Synthèse des annonces {% endblock %}
{% block body %}
   <main class="consultantProcesses container" {{ stimulus_controller('symfony/ux-swup/swup', {
    containers: ['#ConsultProcesses', '#pageProcesses', '#sortingProcesses']
}) }}>
       <div class="sorting d-flex justify-content-start" id="sortingProcesses">
           <p{% if synthesis.isSorted('r.createdAt') %} class="sorted"{% endif %}>
               {{ knp_pagination_sortable(synthesis, 'Date de création', 'r.createdAt') }}
           </p>
           <p{% if synthesis.isSorted('r.status') %} class="sorted"{% endif %}>
               {{ knp_pagination_sortable(synthesis, 'Status', 'r.status') }}
           </p>
           <p{% if synthesis.isSorted('a.title') %} class="sorted"{% endif %}>
               {{ knp_pagination_sortable(synthesis, 'Annonce', 'a.title') }}
           </p>
       </div>
       <div class="container d-flex justify-content-center">
           <div class="row row-cols-1 row-cols-md-2 row-cols-lg-4 g-4">
            {% for synthese in synthesis %}
                <div class="col" id="ConsultProcesses">
                    <div class="card h-100">
                    <div class="card-header col-md">
                        <a href="">{# NE PAS OUBLIER DE METTRE LE LIEN VERS LES CANDIATS #}
                        {{ synthese.candidat.user.firstname }}
                        {{ synthese.candidat.user.lastName }}
                        </a>
                    </div>
                        <ul class="list-group list-group-flush">
                            <li class="list-group-item">Nombre de RDV : {{ synthese.appointements.count }}</li>
                            <li class="list-group-item d-flex justify-content-between">
                                {% if synthese.annonce == null %}
                                    <p>Candidature spontanée à {{ synthese.company.name }}</p>
                                    <img src="{{ vich_uploader_asset(synthese.company) }}" alt="{{ synthese.company.name }}">
                                {% else %}
                                        <p>
                                            <a class="lienAnnonce stretched-link" style="transform: rotate(0);" href="{{ path('annonce_show', {"id": synthese.id}) }}">Annonce : {{ synthese.annonce.title }}</a>
                                        </p>
                                    {#<img src="{{ vich_uploader_asset(synthese.annonce.company) }}" alt="{{ synthese.annonce.company }}">#}

                                {% endif %}
                            </li>
                            <li class="list-group-item">{{ synthese.status }}</li>
                            <li class="list-group-item">{{ synthese.externaticConsultant.user.firstname }}</li>
                            <li class="list-group-item d-flex justify-content-center">
                                <a href="{{ path('consultant_recruitment_process_show', {"id": synthese.id}) }}" class="btn btn-primary"> Suivre le processus</a>
                            </li>
                        </ul>

                    </div>
                </div>
             {% endfor %}
            <div class="container d-flex justify-content-center mt-4" id="pageProcesses">{{ knp_pagination_render(synthesis) }}</div>
        </div></div>
    </main>
{% endblock %}

